2025-11-12 21:07:22,870 | DEBUG | dictator.logging_setup | Logging initialized in logs\run-20251112-210722
2025-11-12 21:07:22,870 | INFO | DictatorService | Logging initialized (run_dir=logs\run-20251112-210722, structured=True)
2025-11-12 21:07:22,870 | DEBUG | DictatorService.ThreadMonitor | Thread monitor enabled (interval=30.0s)
2025-11-12 21:07:22,871 | DEBUG | DictatorService.ThreadMonitor | Starting thread monitor (interval=30.0s)
2025-11-12 21:07:22,903 | INFO | DictatorService | ğŸ™ï¸ Dictator Service initializing...
2025-11-12 21:07:22,903 | INFO | DictatorService.ThreadMonitor | Thread snapshot: total=40, top=[{'id': 30432, 'name': 'MainThread', 'cpu_ms': 14671.88}, {'id': 34648, 'name': 'unknown', 'cpu_ms': 5171.88}, {'id': 2668, 'name': 'unknown', 'cpu_ms': 1421.88}, {'id': 25364, 'name': 'unknown', 'cpu_ms': 1421.88}, {'id': 7240, 'name': 'unknown', 'cpu_ms': 1421.88}]
2025-11-12 21:07:22,904 | INFO | DictatorService | ğŸ“¦ Loading Whisper model 'large-v3' on cuda...
2025-11-12 21:07:22,904 | INFO | DictatorService |    Using faster-whisper with compute_type=float16
2025-11-12 21:07:22,904 | DEBUG | httpcore.connection | close.started
2025-11-12 21:07:22,904 | DEBUG | httpcore.connection | close.complete
2025-11-12 21:07:22,905 | DEBUG | httpcore.connection | connect_tcp.started host='huggingface.co' port=443 local_address=None timeout=None socket_options=None
2025-11-12 21:07:22,931 | DEBUG | httpcore.connection | connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002B7CAE6BD40>
2025-11-12 21:07:22,931 | DEBUG | httpcore.connection | start_tls.started ssl_context=<ssl.SSLContext object at 0x000002B4D2F6B070> server_hostname='huggingface.co' timeout=None
2025-11-12 21:07:22,935 | DEBUG | httpcore.connection | start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002B7CAE6A5D0>
2025-11-12 21:07:22,935 | DEBUG | httpcore.http11 | send_request_headers.started request=<Request [b'GET']>
2025-11-12 21:07:22,936 | DEBUG | httpcore.http11 | send_request_headers.complete
2025-11-12 21:07:22,936 | DEBUG | httpcore.http11 | send_request_body.started request=<Request [b'GET']>
2025-11-12 21:07:22,936 | DEBUG | httpcore.http11 | send_request_body.complete
2025-11-12 21:07:22,936 | DEBUG | httpcore.http11 | receive_response_headers.started request=<Request [b'GET']>
2025-11-12 21:07:23,073 | DEBUG | httpcore.http11 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'4600'), (b'Connection', b'keep-alive'), (b'Date', b'Thu, 13 Nov 2025 00:07:22 GMT'), (b'ETag', b'W/"11f8-OdbdQ9ef6Cr/xpj0m27tBd+pzac"'), (b'X-Powered-By', b'huggingface-moon'), (b'X-Request-Id', b'Root=1-6915213a-6d0a38050bbdee3f4bb3d67e;e3b468b8-673c-4814-848d-eaf42dfff2ca'), (b'RateLimit', b'"api";r=499;t=297'), (b'RateLimit-Policy', b'"fixed window";"api";q=500;w=300'), (b'cross-origin-opener-policy', b'same-origin'), (b'Referrer-Policy', b'strict-origin-when-cross-origin'), (b'Access-Control-Max-Age', b'86400'), (b'Access-Control-Allow-Origin', b'https://huggingface.co'), (b'Vary', b'Origin'), (b'Access-Control-Expose-Headers', b'X-Repo-Commit,X-Request-Id,X-Error-Code,X-Error-Message,X-Total-Count,ETag,Link,Accept-Ranges,Content-Range,X-Linked-Size,X-Linked-ETag,X-Xet-Hash'), (b'X-Cache', b'Miss from cloudfront'), (b'Via', b'1.1 0f269dfc4e9cde17231eae35051f52e4.cloudfront.net (CloudFront)'), (b'X-Amz-Cf-Pop', b'GIG52-P2'), (b'X-Amz-Cf-Id', b'WDvI0UbV9s_iWtP8GLS_o_HHpxwD5nX6EvHxP4q0BIH_31UvcenXDA==')])
2025-11-12 21:07:23,073 | INFO | httpx | HTTP Request: GET https://huggingface.co/api/models/Systran/faster-whisper-large-v3/revision/main "HTTP/1.1 200 OK"
2025-11-12 21:07:23,074 | DEBUG | httpcore.http11 | receive_response_body.started request=<Request [b'GET']>
2025-11-12 21:07:23,074 | DEBUG | httpcore.http11 | receive_response_body.complete
2025-11-12 21:07:23,074 | DEBUG | httpcore.http11 | response_closed.started
2025-11-12 21:07:23,074 | DEBUG | httpcore.http11 | response_closed.complete
2025-11-12 21:07:25,204 | INFO | DictatorService | âœ… Model 'large-v3' loaded successfully on cuda!
2025-11-12 21:07:25,204 | INFO | DictatorService | ğŸ® Using GPU: NVIDIA GeForce RTX 5080 (15.9 GB VRAM)
2025-11-12 21:07:25,205 | INFO | DictatorService | ğŸ¤ Loading TTS engine...
2025-11-12 21:07:25,205 | INFO | KokoroTTS | ğŸ¤ Loading Kokoro TTS (model=kokoro-v1.0.onnx)...
2025-11-12 21:07:25,702 | INFO | KokoroTTS | âœ… Kokoro TTS loaded successfully!
2025-11-12 21:07:25,702 | INFO | DictatorService | âœ… TTS engine loaded successfully!
2025-11-12 21:07:25,702 | INFO | DictatorService | ğŸ¯ Loading event-driven voice session...
2025-11-12 21:07:25,702 | INFO | DictatorService | ğŸ¤ VAD enabled: False
2025-11-12 21:07:25,702 | INFO | DictatorService | ğŸ¤– Using Claude CLI provider
2025-11-12 21:07:25,703 | DEBUG | asyncio | Using proactor: IocpProactor
2025-11-12 21:07:25,704 | INFO | DictatorService | ğŸ¤ Starting voice session (attempt 1/3)
2025-11-12 21:07:25,704 | INFO | DictatorService | ğŸ”— Event loop configured for thread-safe publishing
2025-11-12 21:07:25,704 | INFO | DictatorService | ğŸ”„ Event processor started
2025-11-12 21:07:25,803 | INFO | DictatorService | âœ… Event-driven voice session loaded - ZERO polling!
2025-11-12 21:07:25,804 | INFO | DictatorService | ğŸš€ Dictator Service started
2025-11-12 21:07:25,805 | INFO | DictatorService | ğŸ–±ï¸  Listening for mouse button: side1
2025-11-12 21:07:27,869 | INFO | DictatorService | ğŸ”´ Recording started...
2025-11-12 21:07:27,869 | INFO | DictatorService | ğŸ§¹ Cleared audio buffer
2025-11-12 21:07:27,933 | DEBUG | DictatorService | ğŸµ Voice session started receiving audio chunks
2025-11-12 21:07:28,079 | INFO | DictatorService | â¹ï¸ Recording stopped
2025-11-12 21:07:28,079 | INFO | DictatorService | ğŸ¤ VAD disabled: emitting manual SPEECH_STOPPED event
2025-11-12 21:07:28,080 | INFO | DictatorService | ğŸ“¢ Publishing SPEECH_STOPPED event to 1 subscribers
2025-11-12 21:07:28,080 | INFO | DictatorService | âœ… SPEECH_STOPPED event published to queue
2025-11-12 21:07:28,080 | INFO | DictatorService | ğŸ“¨ Event received: EventType.SPEECH_STOPPED (total events: 1)
2025-11-12 21:07:28,080 | INFO | DictatorService | ğŸ¯ Event-driven mode: Voice session will handle transcription via events
2025-11-12 21:07:28,080 | INFO | DictatorService | ğŸ¯ Handling event: EventType.SPEECH_STOPPED
2025-11-12 21:07:28,080 | INFO | DictatorService | ğŸ›‘ Speech ended, transcribing...
2025-11-12 21:07:28,081 | INFO | DictatorService | ğŸ¯ Speech stopped - VAD mode: disabled, Buffer size: 2496 samples (0.16s)
2025-11-12 21:07:28,081 | WARNING | DictatorService | âš ï¸ Ignoring speech event with insufficient audio (2496 samples, need 8000)
2025-11-12 21:07:28,081 | INFO | DictatorService | ğŸ“¨ Event received: EventType.TRANSCRIPTION_STARTED (total events: 2)
2025-11-12 21:07:28,081 | INFO | DictatorService | ğŸ¯ Handling event: EventType.TRANSCRIPTION_STARTED
2025-11-12 21:07:30,161 | INFO | DictatorService | ğŸ”´ Recording started...
2025-11-12 21:07:30,161 | INFO | DictatorService | ğŸ§¹ Cleared audio buffer
2025-11-12 21:07:30,224 | DEBUG | DictatorService | ğŸµ Voice session started receiving audio chunks
2025-11-12 21:07:31,214 | DEBUG | DictatorService | ğŸ“Š Buffer size: 16224 samples (1.01s)
2025-11-12 21:07:31,244 | INFO | DictatorService | âœ… Voice session healthy, processing audio
2025-11-12 21:07:32,204 | DEBUG | DictatorService | ğŸ“Š Buffer size: 32032 samples (2.00s)
2025-11-12 21:07:33,214 | DEBUG | DictatorService | ğŸ“Š Buffer size: 48256 samples (3.02s)
2025-11-12 21:07:36,981 | INFO | DictatorService | â¹ï¸ Recording stopped
2025-11-12 21:07:36,982 | INFO | DictatorService | ğŸ¤ VAD disabled: emitting manual SPEECH_STOPPED event
2025-11-12 21:07:36,982 | INFO | DictatorService | ğŸ“¢ Publishing SPEECH_STOPPED event to 1 subscribers
2025-11-12 21:07:36,983 | INFO | DictatorService | âœ… SPEECH_STOPPED event published to queue
2025-11-12 21:07:36,983 | INFO | DictatorService | ğŸ“¨ Event received: EventType.SPEECH_STOPPED (total events: 3)
2025-11-12 21:07:36,983 | INFO | DictatorService | ğŸ¯ Event-driven mode: Voice session will handle transcription via events
2025-11-12 21:07:36,983 | INFO | DictatorService | ğŸ¯ Handling event: EventType.SPEECH_STOPPED
2025-11-12 21:07:36,983 | INFO | DictatorService | ğŸ›‘ Speech ended, transcribing...
2025-11-12 21:07:36,983 | INFO | DictatorService | ğŸ¯ Speech stopped - VAD mode: disabled, Buffer size: 108160 samples (6.76s)
2025-11-12 21:07:37,130 | INFO | faster_whisper | Processing audio with duration 00:06.760
2025-11-12 21:07:37,133 | DEBUG | faster_whisper | Processing segment at 00:00.000
2025-11-12 21:07:39,111 | INFO | DictatorService | ğŸ“¨ Event received: EventType.TRANSCRIPTION_STARTED (total events: 4)
2025-11-12 21:07:39,111 | INFO | DictatorService | ğŸ¯ Handling event: EventType.TRANSCRIPTION_STARTED
2025-11-12 21:07:39,112 | INFO | DictatorService | ğŸ“¨ Event received: EventType.TRANSCRIPTION_COMPLETED (total events: 5)
2025-11-12 21:07:39,112 | INFO | DictatorService | ğŸ¯ Handling event: EventType.TRANSCRIPTION_COMPLETED
2025-11-12 21:07:39,112 | INFO | DictatorService | ğŸ“ Transcription complete, calling LLM...
2025-11-12 21:07:39,113 | INFO | DictatorService | ğŸ“ Transcribed text: 'Eu mudei pro CloudKlee agora, porque a Ãºltima vez que a gente testou, eu tava sem tokens disponÃ­veis.'
2025-11-12 21:07:39,113 | INFO | DictatorService | ğŸ”µ About to call _call_claude_cli...
2025-11-12 21:07:39,115 | INFO | DictatorService | ğŸ” Using Claude CLI: C:\Users\rodri\AppData\Roaming\npm\claude.CMD
2025-11-12 21:07:39,115 | INFO | DictatorService | ğŸš€ Starting dedicated thread for subprocess...
2025-11-12 21:07:39,116 | INFO | DictatorService | ğŸ¤– [Thread ClaudeCLI] Calling Claude CLI
2025-11-12 21:07:39,116 | INFO | DictatorService | ğŸ“ Prompt length: 764 chars
2025-11-12 21:07:39,116 | INFO | DictatorService | ğŸ”§ Command: C:\Users\rodri\AppData\Roaming\npm\claude.CMD --print --output-format text
2025-11-12 21:07:39,116 | INFO | DictatorService | ğŸ“„ First 200 chars of prompt: You are Dictator, a concise voice assistant integrated into a Windows dictation system.

IMPORTANT - Your responses will be read aloud via text-to-speech:
- Keep answers under 3 sentences maximum
- Be...
2025-11-12 21:07:39,117 | INFO | DictatorService | ğŸ“ Working directory: D:\Dev\py\Dictator\src
2025-11-12 21:07:45,255 | INFO | DictatorService | âœ… Subprocess completed with code: 0
2025-11-12 21:07:45,255 | INFO | DictatorService | ğŸ¤– Response length: 181 chars
2025-11-12 21:07:45,337 | INFO | DictatorService | âœ… Got response from thread
2025-11-12 21:07:45,337 | INFO | DictatorService | ğŸŸ¢ _call_claude_cli returned: 181 chars
2025-11-12 21:07:45,338 | INFO | DictatorService | ğŸ“„ Response text: Entendi, vocÃª trocou para o CloudKlee porque estava sem tokens na Ãºltima vez. Agora deve estar funcionando normalmente. Se precisar de ajuda com alguma coisa especÃ­fica, Ã© sÃ³ falar....
2025-11-12 21:07:45,338 | INFO | DictatorService | ğŸ§¹ Cleaned response: Entendi, vocÃª trocou para o CloudKlee porque estava sem tokens na Ãºltima vez. Agora deve estar funci...
2025-11-12 21:07:45,338 | INFO | DictatorService | ğŸ“¢ Publishing TTS_SENTENCE_READY event...
2025-11-12 21:07:45,338 | INFO | DictatorService | ğŸ“¢ Publishing LLM_RESPONSE_COMPLETED event
2025-11-12 21:07:45,338 | INFO | DictatorService | ğŸ“¨ Event received: EventType.LLM_REQUEST (total events: 6)
2025-11-12 21:07:45,338 | INFO | DictatorService | ğŸ¯ Handling event: EventType.LLM_REQUEST
2025-11-12 21:07:45,339 | INFO | DictatorService | ğŸ“¨ Event received: EventType.TTS_SENTENCE_READY (total events: 7)
2025-11-12 21:07:45,339 | INFO | DictatorService | ğŸ¯ Handling event: EventType.TTS_SENTENCE_READY
2025-11-12 21:07:45,339 | INFO | DictatorService | ğŸ”Š TTS sentence ready, synthesizing...
2025-11-12 21:07:45,339 | INFO | DictatorService | ğŸµ TTS handler received: 'Entendi, vocÃª trocou para o CloudKlee porque estava sem tokens na Ãºltima vez. Agora deve estar funci...'
2025-11-12 21:07:45,339 | INFO | DictatorService | ğŸ”Š Starting TTS synthesis...
2025-11-12 21:07:45,339 | INFO | DictatorService | ğŸ”Š Speaking: Entendi, vocÃª trocou para o CloudKlee porque estav...
2025-11-12 21:07:45,339 | INFO | KokoroTTS | ğŸ”Š Speaking: Entendi, vocÃª trocou para o CloudKlee porque estav...
2025-11-12 21:07:45,340 | WARNING | phonemizer | words count mismatch on 100.0% of the lines (1/1)
2025-11-12 21:07:46,587 | INFO | KokoroTTS | âš¡ Audio generated in 1.25s
2025-11-12 21:07:52,916 | INFO | DictatorService.ThreadMonitor | Thread snapshot: total=46, top=[{'id': 30432, 'name': 'MainThread', 'cpu_ms': 17281.25}, {'id': 27552, 'name': 'unknown', 'cpu_ms': 1968.75}, {'id': 36088, 'name': 'asyncio_0', 'cpu_ms': 1328.12}, {'id': 17812, 'name': 'unknown', 'cpu_ms': 1062.5}, {'id': 31144, 'name': 'unknown', 'cpu_ms': 1062.5}]
2025-11-12 21:07:56,044 | INFO | KokoroTTS | âœ… Speech completed
2025-11-12 21:07:56,045 | INFO | DictatorService | âœ… TTS synthesis completed
2025-11-12 21:07:56,045 | INFO | DictatorService | ğŸ¤ VAD re-enabled after TTS
2025-11-12 21:07:56,045 | INFO | DictatorService | ğŸ“¨ Event received: EventType.LLM_RESPONSE_COMPLETED (total events: 8)
2025-11-12 21:07:56,045 | INFO | DictatorService | ğŸ¯ Handling event: EventType.LLM_RESPONSE_COMPLETED
2025-11-12 21:07:56,045 | INFO | DictatorService | ğŸ“¨ Event received: EventType.TTS_AUDIO_GENERATED (total events: 9)
2025-11-12 21:07:56,046 | INFO | DictatorService | ğŸ¯ Handling event: EventType.TTS_AUDIO_GENERATED
2025-11-12 21:08:09,267 | INFO | DictatorService | ğŸ’¾ Configuration saved
2025-11-12 21:08:09,267 | INFO | DictatorService | ğŸ”„ LLM Provider changed to: n8n_toolcalling
2025-11-12 21:08:09,267 | INFO | DictatorService | ğŸ”„ Restarting service to apply provider changes...
2025-11-12 21:08:09,268 | INFO | DictatorService | ğŸ”„ Restarting service...
2025-11-12 21:08:09,268 | INFO | DictatorService | ğŸ›‘ Dictator Service stopping...
2025-11-12 21:08:09,268 | INFO | DictatorService | Voice session stopped
2025-11-12 21:08:09,268 | INFO | DictatorService | Voice session completed normally
2025-11-12 21:08:09,269 | INFO | DictatorService | ğŸ‘‹ Dictator Service stopped
